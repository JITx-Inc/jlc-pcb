#use-added-syntax(jitx,tests)
defpackage jlc-pcb/tests/stackups :
  import core
  import jitx
  import jitx/commands
  import jsl/layerstack
  import jsl/tests/layerstack
  import jlc-pcb/shared
  import jlc-pcb/stackups

deftest test-JLC04161H-7628 :
  val test-stackup = jlc-pcb/JLC04161H-7628/stackup
  print-def(test-stackup)
  println(get-def-string(test-stackup))
  ; => "pcb-stackup D90custom-stackup"

  val test-stack = jlc-pcb/JLC04161H-7628/stack
  verify-layers(test-stack, top-layers) where :
    val core = FR4("7628", 1.065, "core")
    val prepreg = FR4("7628", 0.2104, "7628x1")
    val top-layers = 
      [ 
        copper-35um
        prepreg
        copper-15_2um
        core
      ]

deftest test-general-JLC04161H-7628 :
  val test-stackup = create-pcb-stackup-from-name("JLC04161H-7628")
  print-def(test-stackup)
  
  ;TODO: comparison of two pcb-stackup
  ;#EXPECT(test-stackup == jlc-pcb/JLC04161H-7628/stackup)

; three adjacent prepreg layers
deftest test-general-JLC04161H-7628B :
  val test-stackup = create-pcb-stackup-from-name("JLC04161H-7628B")
  print-def(test-stackup)
  